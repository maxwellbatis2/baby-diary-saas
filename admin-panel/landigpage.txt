import { Button } from "@/components/ui/button";
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";
import { CheckIcon, XIcon, ArrowRight, Baby, Heart, Star, CalendarClock, Sparkles, Moon, Sun, Brain, Users, Smartphone, Shield, Camera, MessageCircle, BarChart3, Zap, Globe, TrendingUp, Award } from "lucide-react";
import { useAuth } from "@/contexts/AuthContext";
import { useState } from "react";
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from "@/components/ui/accordion";
import { ThemeToggle } from "@/components/ThemeToggle";
import { Link } from "react-router-dom";
import { FeatureGrid } from "@/components/landing/FeatureGrid";
import { TestimonialSection } from "@/components/landing/TestimonialSection";
import { StatsSection } from "@/components/landing/StatsSection";

const Index = () => {
  const { user } = useAuth();
  const [annualBilling, setAnnualBilling] = useState(true);

  const coreFeatures = [
    {
      title: "Di√°rio do Sono",
      description: "Acompanhe os padr√µes de sono do seu beb√™ e receba insights personalizados para melhorar a qualidade do sono.",
      icon: Moon
    },
    {
      title: "Alimenta√ß√£o",
      description: "Registre mamadas, papinhas e introdu√ß√£o alimentar. Receba dicas baseadas na idade do seu beb√™.",
      icon: Baby
    },
    {
      title: "Curva de Crescimento",
      description: "Acompanhe o desenvolvimento f√≠sico do seu beb√™ com gr√°ficos comparativos baseados nos padr√µes da OMS.",
      icon: CalendarClock
    },
    {
      title: "Vacina√ß√£o",
      description: "Calend√°rio de vacinas personalizado com lembretes autom√°ticos para nunca perder uma dose importante.",
      icon: Heart
    }
  ];

  const aiFeatures = [
    {
      title: "Assistente IA",
      description: "Chat inteligente para tirar d√∫vidas sobre desenvolvimento, sono e alimenta√ß√£o do seu beb√™.",
      icon: Brain,
      badge: "Novo",
      gradient: "bg-gradient-to-r from-purple-500 to-pink-500"
    },
    {
      title: "Previs√µes Inteligentes",
      description: "An√°lise preditiva de padr√µes de sono e sugest√µes de hor√°rios otimizados.",
      icon: Zap,
      badge: "IA",
      gradient: "bg-gradient-to-r from-blue-500 to-cyan-500"
    },
    {
      title: "Insights Personalizados",
      description: "Relat√≥rios autom√°ticos com an√°lises baseadas nos dados do seu beb√™.",
      icon: BarChart3,
      badge: "Pro",
      gradient: "bg-gradient-to-r from-green-500 to-emerald-500"
    },
    {
      title: "Conselhos Especializados",
      description: "Dicas e recomenda√ß√µes baseadas em milhares de dados de desenvolvimento infantil.",
      icon: Award,
      gradient: "bg-gradient-to-r from-orange-500 to-red-500"
    }
  ];

  const socialFeatures = [
    {
      title: "Colabora√ß√£o Familiar",
      description: "Compartilhe com av√≥s, bab√°s e cuidadores. Cada um com permiss√µes espec√≠ficas.",
      icon: Users
    },
    {
      title: "Chat em Tempo Real",
      description: "Converse com outros cuidadores sobre o beb√™ diretamente no app.",
      icon: MessageCircle
    },
    {
      title: "Modo Offline",
      description: "Continue registrando mesmo sem internet. Sincroniza√ß√£o autom√°tica quando conectar.",
      icon: Smartphone
    },
    {
      title: "M√°xima Seguran√ßa",
      description: "Criptografia end-to-end e total conformidade com LGPD para proteger os dados do seu beb√™.",
      icon: Shield
    }
  ];

  const FeatureCard = ({ 
    title, 
    description,
    icon: Icon,
  }: { 
    title: string;
    description: string;
    icon: any;
  }) => (
    <Card className="text-center shadow-lg border border-accent/60 hover:border-primary/20 transition-all">
      <CardHeader>
        <div className="mx-auto w-12 h-12 bg-primary/10 rounded-full flex items-center justify-center mb-2">
          <Icon className="h-6 w-6 text-primary" />
        </div>
        <CardTitle>{title}</CardTitle>
      </CardHeader>
      <CardContent>
        <p className="text-muted-foreground">{description}</p>
      </CardContent>
    </Card>
  );

  const PricingCard = ({ 
    title, 
    price, 
    description, 
    features, 
    notIncluded,
    popular,
    buttonText,
    buttonAction,
    buttonVariant = "default"
  }: { 
    title: string;
    price: string;
    description: string;
    features: string[];
    notIncluded?: string[];
    popular?: boolean;
    buttonText: string;
    buttonAction: () => void;
    buttonVariant?: "default" | "outline" | "secondary";
  }) => (
    <Card className={`relative overflow-hidden shadow-lg ${popular ? 'border-primary shadow-xl border-2' : 'border'}`}>
      {popular && (
        <div className="absolute top-0 right-0">
          <Badge className="m-2 bg-gradient-to-r from-pink-500 to-violet-500">Mais popular</Badge>
        </div>
      )}
      <CardHeader>
        <CardTitle className="flex items-center justify-between">
          {title}
        </CardTitle>
        <div className="flex items-end gap-1">
          <span className="text-3xl font-bold">{price}</span>
          {price !== "Gr√°tis" && (
            <span className="text-muted-foreground mb-1">/{annualBilling ? 'ano' : 'm√™s'}</span>
          )}
        </div>
        <CardDescription>{description}</CardDescription>
      </CardHeader>
      <CardContent>
        <ul className="space-y-2">
          {features.map((feature, index) => (
            <li key={index} className="flex items-start">
              <CheckIcon className="h-5 w-5 text-green-500 mr-2 shrink-0 mt-0.5" />
              <span>{feature}</span>
            </li>
          ))}
          {notIncluded && notIncluded.map((feature, index) => (
            <li key={index} className="flex items-start text-muted-foreground">
              <XIcon className="h-5 w-5 text-muted-foreground mr-2 shrink-0 mt-0.5" />
              <span>{feature}</span>
            </li>
          ))}
        </ul>
      </CardContent>
      <CardFooter>
        <Button 
          onClick={buttonAction} 
          className={`w-full ${buttonVariant === 'default' && popular ? 'bg-gradient-to-r from-pink-500 to-violet-500 hover:opacity-90 text-white' : ''}`}
          variant={buttonVariant}
        >
          {buttonText}
        </Button>
      </CardFooter>
    </Card>
  );

  return (
    <div className="min-h-screen flex flex-col">
      <header className="py-4 px-6 border-b shadow-sm">
        <div className="container mx-auto flex justify-between items-center">
          <Link to="/" className="font-bold text-xl text-primary flex items-center">
            <Baby className="mr-2 h-5 w-5" /> Baby Diary
          </Link>
          <div className="flex items-center space-x-2">
            <ThemeToggle />
            {user ? (
              <Button asChild variant="default" size="sm">
                <Link to="/dashboard">Meu Di√°rio</Link>
              </Button>
            ) : (
              <>
                <Button asChild variant="outline" size="sm">
                  <Link to="/login">Entrar</Link>
                </Button>
                <Button asChild variant="default" size="sm">
                  <Link to="/register">Criar Conta</Link>
                </Button>
              </>
            )}
          </div>
        </div>
      </header>

      <main className="flex-grow">
        {/* Hero Section */}
        <section className="py-20 px-6 md:py-28">
          <div className="container mx-auto max-w-6xl">
            <div className="grid grid-cols-1 md:grid-cols-2 gap-12 items-center">
              <div>
                <h1 className="text-4xl md:text-5xl font-bold leading-tight mb-6">
                  <span className="bg-clip-text text-transparent bg-gradient-to-r from-pink-500 to-violet-500 flex items-center">
                    <Baby className="mr-2 h-8 w-8" /> Baby Diary
                  </span>
                  <br />
                  Seu di√°rio digital inteligente para acompanhar o beb√™ <Sparkles className="inline h-6 w-6 text-yellow-400" />
                </h1>
                <p className="text-lg text-muted-foreground mb-8">
                  Registre atividades, mem√≥rias e marcos importantes do seu beb√™ com o poder da intelig√™ncia artificial. 
                  Nunca perca um momento especial do desenvolvimento do seu pequeno <Heart className="inline h-4 w-4 text-pink-500" />
                </p>
                <div className="flex flex-col sm:flex-row gap-4">
                  {user ? (
                    <Button asChild size="lg" className="bg-gradient-to-r from-pink-500 to-violet-500 hover:opacity-90 text-white shadow-lg">
                      <Link to="/dashboard">Ir para Meu Di√°rio</Link>
                    </Button>
                  ) : (
                    <>
                      <Button asChild size="lg" className="bg-gradient-to-r from-pink-500 to-violet-500 hover:opacity-90 text-white shadow-lg">
                        <Link to="/register">
                          Come√ßar Gratuitamente <Star className="ml-2 h-4 w-4" />
                        </Link>
                      </Button>
                      <Button asChild variant="outline" size="lg">
                        <Link to="/login">J√° tenho uma conta</Link>
                      </Button>
                    </>
                  )}
                </div>
              </div>

              <div className="relative">
                <div className="absolute -z-10 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[90%] h-[90%] bg-gradient-to-r from-pink-200/40 to-violet-200/40 rounded-full blur-3xl"></div>
                <div className="rounded-xl overflow-hidden shadow-[0_20px_50px_rgba(217,70,219,0.2)]">
                  <img
                    src="https://images.unsplash.com/photo-1649972904349-6e44c42644a7?w=600&h=400&fit=crop"
                    alt="Beb√™s brincando com frutas"
                    className="w-full h-auto rounded-xl"
                  />
                </div>
              </div>
            </div>
          </div>
        </section>

        {/* Stats Section */}
        <StatsSection />

        {/* Core Features */}
        <FeatureGrid 
          features={coreFeatures}
          title="Funcionalidades exclusivas para mam√£es ‚ù§Ô∏è"
          subtitle="Baby Diary foi projetado para tornar o acompanhamento do desenvolvimento do seu beb√™ simples e agrad√°vel"
        />

        {/* AI Features */}
        <FeatureGrid 
          features={aiFeatures}
          title="Intelig√™ncia Artificial a seu favor ü§ñ"
          subtitle="Tecnologia avan√ßada para insights personalizados e sugest√µes inteligentes baseadas no comportamento √∫nico do seu beb√™"
        />

        {/* Social Features */}
        <FeatureGrid 
          features={socialFeatures}
          title="Conecte toda a fam√≠lia üë®‚Äçüë©‚Äçüëß‚Äçüë¶"
          subtitle="Mantenha todos os cuidadores sincronizados e engajados no desenvolvimento do beb√™"
        />

        {/* Testimonials */}
        <TestimonialSection />

        {/* Pricing Section */}
        <section className="py-16 px-6 bg-background">
          <div className="container mx-auto max-w-6xl">
            <div className="text-center max-w-3xl mx-auto mb-16">
              <h2 className="text-3xl font-bold mb-4">Planos para todas as necessidades <Sparkles className="inline h-5 w-5 text-yellow-400" /></h2>
              <p className="text-xl text-muted-foreground mb-8">
                Escolha o plano perfeito para registrar todas as mem√≥rias e marcos importantes do seu beb√™
              </p>
              
              <div className="flex items-center justify-center space-x-2 mb-8">
                <span className={!annualBilling ? "font-medium" : "text-muted-foreground"}>Mensal</span>
                <button
                  type="button"
                  className={`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none ${
                    annualBilling ? 'bg-primary' : 'bg-gray-200'
                  }`}
                  role="switch"
                  aria-checked={annualBilling}
                  onClick={() => setAnnualBilling(!annualBilling)}
                >
                  <span
                    aria-hidden="true"
                    className={`pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ${
                      annualBilling ? 'translate-x-5' : 'translate-x-0'
                    }`}
                  />
                </button>
                <span className={annualBilling ? "font-medium" : "text-muted-foreground"}>
                  Anual <Badge variant="outline" className="ml-1">Economize 20%</Badge>
                </span>
              </div>
            </div>

            <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
              <PricingCard
                title="B√°sico"
                price="Gr√°tis"
                description="Perfeito para come√ßar a registrar mem√≥rias do seu beb√™"
                features={[
                  "Registro de 1 beb√™",
                  "Di√°rio de mem√≥rias (at√© 10 por m√™s)",
                  "Registro de atividades b√°sicas",
                  "Fotos em baixa resolu√ß√£o",
                  "Marcos do desenvolvimento"
                ]}
                notIncluded={[
                  "Assistente IA avan√ßado",
                  "Backup autom√°tico na nuvem",
                  "Compartilhamento com familiares",
                  "Relat√≥rios e an√°lises",
                  "Exporta√ß√£o de mem√≥rias"
                ]}
                buttonText={user ? "Seu plano atual" : "Come√ßar gr√°tis"}
                buttonAction={() => user ? window.location.href = '/dashboard' : window.location.href = '/register'}
                buttonVariant={user ? "outline" : "default"}
              />

              <PricingCard
                title="Premium"
                price={annualBilling ? "R$19,90" : "R$24,90"}
                description="Ideal para acompanhar todo o desenvolvimento do seu beb√™"
                features={[
                  "Registro de at√© 5 beb√™s",
                  "Di√°rio de mem√≥rias ilimitado",
                  "Assistente IA completo",
                  "Todos os tipos de atividades",
                  "Fotos em alta resolu√ß√£o",
                  "Marcos do desenvolvimento personalizados",
                  "Backup autom√°tico na nuvem",
                  "Compartilhamento com at√© 5 familiares",
                  "Relat√≥rios com IA",
                  "Exporta√ß√£o mensal de mem√≥rias",
                  "Suporte priorit√°rio"
                ]}
                popular
                buttonText="Assinar Premium"
                buttonAction={() => alert('Funcionalidade de assinatura em breve!')}
                buttonVariant="default"
              />

              <PricingCard
                title="Fam√≠lia"
                price={annualBilling ? "R$29,90" : "R$36,90"}
                description="Para fam√≠lias que querem registrar tudo com o m√°ximo de recursos"
                features={[
                  "Registro de beb√™s ilimitado",
                  "Di√°rio de mem√≥rias ilimitado",
                  "IA avan√ßada com previs√µes",
                  "Todos os tipos de atividades",
                  "Fotos e v√≠deos em alta resolu√ß√£o",
                  "Marcos do desenvolvimento personalizados",
                  "Backup autom√°tico na nuvem",
                  "Compartilhamento ilimitado com familiares",
                  "Consultoria virtual com especialistas",
                  "Exporta√ß√£o em diversos formatos",
                  "√Ålbuns de mem√≥rias impressos anuais",
                  "Relat√≥rios avan√ßados de desenvolvimento",
                  "Suporte VIP 24/7"
                ]}
                buttonText="Assinar Fam√≠lia"
                buttonAction={() => alert('Funcionalidade de assinatura em breve!')}
                buttonVariant="outline"
              />
            </div>
          </div>
        </section>

        {/* FAQ Section */}
        <section className="py-16 px-6 bg-accent/30">
          <div className="container mx-auto max-w-4xl">
            <div className="text-center mb-12">
              <h2 className="text-3xl font-bold mb-4">Perguntas Frequentes <Sparkles className="inline h-5 w-5 text-yellow-400" /></h2>
              <p className="text-muted-foreground max-w-2xl mx-auto">
                Tudo o que voc√™ precisa saber sobre o Baby Diary
              </p>
            </div>

            <Accordion type="single" collapsible className="bg-background rounded-lg p-6 shadow-lg">
              <AccordionItem value="item-1">
                <AccordionTrigger className="text-lg font-medium">
                  O que √© o Baby Diary e como a IA pode me ajudar?
                </AccordionTrigger>
                <AccordionContent className="text-muted-foreground">
                  Baby Diary √© um aplicativo inteligente de acompanhamento do desenvolvimento e rotina do beb√™ que usa IA para fornecer insights personalizados. Nossa intelig√™ncia artificial analisa os padr√µes do seu beb√™ e oferece sugest√µes de hor√°rios, previs√µes de sono e dicas baseadas em dados cient√≠ficos.
                </AccordionContent>
              </AccordionItem>

              <AccordionItem value="item-2">
                <AccordionTrigger className="text-lg font-medium">
                  Posso utilizar gratuitamente? Quais s√£o as limita√ß√µes?
                </AccordionTrigger>
                <AccordionContent className="text-muted-foreground">
                  Sim! O plano B√°sico √© totalmente gratuito e permite registrar 1 beb√™, com at√© 10 mem√≥rias por m√™s e fun√ß√µes b√°sicas. Para acessar o assistente IA completo, colabora√ß√£o familiar avan√ßada e an√°lises preditivas, oferecemos os planos Premium e Fam√≠lia.
                </AccordionContent>
              </AccordionItem>

              <AccordionItem value="item-3">
                <AccordionTrigger className="text-lg font-medium">
                  Como funciona o assistente de IA? √â seguro?
                </AccordionTrigger>
                <AccordionContent className="text-muted-foreground">
                  Nosso assistente IA usa tecnologia avan√ßada para analisar padr√µes e fornecer insights personalizados sobre sono, alimenta√ß√£o e desenvolvimento. Todos os dados s√£o criptografados e processados com total seguran√ßa, seguindo rigorosamente a LGPD. A IA n√£o substitui conselhos m√©dicos profissionais.
                </AccordionContent>
              </AccordionItem>

              <AccordionItem value="item-4">
                <AccordionTrigger className="text-lg font-medium">
                  Como funciona o compartilhamento com familiares?
                </AccordionTrigger>
                <AccordionContent className="text-muted-foreground">
                  Nos planos pagos, voc√™ pode compartilhar o di√°rio do beb√™ com av√≥s, tios ou bab√°s, permitindo que eles tamb√©m visualizem as atividades e mem√≥rias registradas. Cada pessoa pode ter permiss√µes espec√≠ficas (visualizar, editar, ou administrar). H√° tamb√©m chat em tempo real para coordena√ß√£o entre cuidadores.
                </AccordionContent>
              </AccordionItem>

              <AccordionItem value="item-5">
                <AccordionTrigger className="text-lg font-medium">
                  Meus dados est√£o seguros no aplicativo?
                </AccordionTrigger>
                <AccordionContent className="text-muted-foreground">
                  Sim! A seguran√ßa dos seus dados e os do seu beb√™ √© nossa prioridade m√°xima. Utilizamos criptografia end-to-end, autentica√ß√£o biom√©trica e seguimos todas as normas de prote√ß√£o de dados (LGPD/GDPR). Al√©m disso, nos planos Premium e Fam√≠lia, oferecemos backup autom√°tico em m√∫ltiplas nuvens para garantir que suas mem√≥rias nunca sejam perdidas.
                </AccordionContent>
              </AccordionItem>

              <AccordionItem value="item-6">
                <AccordionTrigger className="text-lg font-medium">
                  O app funciona offline? E se eu perder a conex√£o?
                </AccordionTrigger>
                <AccordionContent className="text-muted-foreground">
                  Sim! O Baby Diary funciona completamente offline. Voc√™ pode registrar atividades, adicionar fotos e criar mem√≥rias mesmo sem internet. Quando a conex√£o retornar, tudo ser√° sincronizado automaticamente e de forma segura com a nuvem.
                </AccordionContent>
              </AccordionItem>
            </Accordion>
          </div>
        </section>
      </main>

      <footer className="py-8 px-6 border-t">
        <div className="container mx-auto max-w-6xl">
          <div className="flex flex-col md:flex-row justify-between items-center">
            <div className="font-semibold text-lg mb-4 md:mb-0 flex items-center">
              <Baby className="mr-2 h-5 w-5" /> Baby Diary
            </div>
            <div className="flex items-center gap-4">
              <ThemeToggle />
              <div className="text-muted-foreground text-sm">
                &copy; {new Date().getFullYear()} Baby Diary. Todos os direitos reservados.
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>
  );
};

export default Index;